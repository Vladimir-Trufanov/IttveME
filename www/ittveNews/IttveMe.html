<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Untitled</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.line-block{white-space: pre-line;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="ittveme">IttveMe</h1>
<p>Труфанов Владимир Евгеньевич, его жизнь и увлечения, жизнь его близких.</p>
<h2 id="содержание">Содержание</h2>
<h3 id="тезисы-по-организации-сайта"><a href="#tezisy-po-organizacii-sajta">1. Тезисы по организации сайта</a></h3>
<h3 id="командные-запросы-сайта"><a href="#komandnyye-zaprosy-sayta">2. Командные запросы сайта</a></h3>
<h3 id="необработанные-ошибки-и-комментарии"><a href="#neobrabotannye-oshibki">3. Необработанные ошибки и комментарии</a></h3>
<h6 id="tezisy-po-organizacii-sajta">tezisy-po-organizacii-sajta</h6>
<h3 id="тезисы-по-организации-сайта-1">1. Тезисы по организации сайта</h3>
<p>Представление материалов на странице сайта, может быть одноколоночным с галереей изображений (по умолчанию) и двухколоночным. Определены четыре режима представления материалов: двухколоночный с правосторонней галереей, двухколоночный с левосторонней галереей, одноколоночный с правосторонней галереей (по умолчанию), одноколоночный с левосторонней галереей.</p>
<p>Как правило, в одной из колонок размещается активная (текущая) статья сайта, а в галерее показаны изображения, связанные со статьей (ближней к галерее изображений).</p>
<p>Активная статья сайта может находиться в двух состояниях: просмотра и редактирования.</p>
<p>В ПЕРСПЕКТИВЕ: вторая колонка на странице сайта появляется в том случае, когда на сайт загружаются новости с других сайтов (в том числе с сайтов платформы ITTVE).</p>
<p>Первая загрузка сайта (и настольная, и мобильная) выполняется в упрощенной версии (как без кукисов и без javascript): слева 2/3 экрана статья, справа 1/3 экрана галерея, шрифт статьи соответствует шрифту подписей к фотографиям.</p>
<p>Разметка сайта единая и для настольной версии, и для мобильной. Настройка изображений и форматирование текстов через CSS.</p>
<p>При запросе любой страницы сайта с контентом присутствует параметр “Com”, например: https://ittve.me/?Com=LifeMenu (запрос страницы с меню и рекламой).</p>
<p>В запросе начальной страницы сайта параметры отсутствуют: https://ittve.me.</p>
<p>Три рабочих каталога используются для контента:</p>
<p>ittveLife - каталог активной статьи сайта и её изображений; ittveEdit - каталог редактируемой статьи и её изображений; ittveNews - каталог сборной новостной статьи.</p>
<h6 id="к-содержанию"><a href="#Содержание">к содержанию</a></h6>
<h6 id="komandnyye-zaprosy-sayta">komandnyye-zaprosy-sayta</h6>
<h3 id="командные-запросы-сайта-1">2. Командные запросы сайта</h3>
<p><strong><em>Com=Doorty</em></strong>, вызов главной страницы; <strong><em>Com=Parm</em></strong>, вызов настройки параметров сайта; <strong><em>Com=NewsXXXX</em></strong>, вызов колонки новостей; <strong><em>Com=StihXXXX</em></strong>, вызов колонки штрихотворения; <strong><em>Com=SshuXXXX</em></strong>, вызов софтшутки; ###### <a href="#Содержание">к содержанию</a> ###### neobrabotannye-oshibki ### 3. Необработанные ошибки и комментарии</p>
<p><strong>Array to string conversion</strong><br />
<strong>Должна была быть строковая переменная, а оказался массив</strong></p>
<pre><code>File: C:\TPhpPrown\ViewGlobal.php Line: 53  
E_NOTICE [HND]</code></pre>
<hr />
<p><strong>syntax error, unexpected ‘else’</strong> <strong>Неожиданно встретился else</strong></p>
<pre><code>File: C:\TPhpPrown\ViewGlobal.php Line: 83  
E_PARSE [SHT]</code></pre>
<p><strong>Причины:</strong> а) может “else” не предшествовала фигурная скобка или двоеточие, закрывающие действие условия “if” или “eise if”. ###### <a href="#%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5">к содержанию</a> *<strong> </strong>setcookie() expects parameter 3 to be integer, string given**</p>
<pre><code>File: /home/kwinflatht/TPhpPrown/MakeCookie.php  
Line: 16  
  
E_WARNING [HND]  
#0 /home/kwinflatht/kwinflatht.nichost.ru/docs/Inimem.php(28): prown\MakeCookie(&#39;BrowEntry&#39;, 1, &#39;integer&#39;)
#1 /home/kwinflatht/kwinflatht.nichost.ru/docs/Main.php(25): require_once(&#39;/home/kwinflath...&#39;)
#2 /home/kwinflatht/kwinflatht.nichost.ru/docs/index.php(22): require_once(&#39;/home/kwinflath...&#39;)
#3 {main}</code></pre>
<p>MakeCookie на сайте</p>
<pre><code>&lt;?php namespace prown; 
                                         
// PHP7/HTML5, EDGE/CHROME                               *** MakeCookie.php ***

// ****************************************************************************
// *                Установить новое значение COOKIE в браузере               *
// *             и заменить значение во внутреннем массиве $_COOKIE           *
// ****************************************************************************

//                                                   Автор:       Труфанов В.Е.
//                                                   Дата создания:  03.02.2018
// Copyright © 2018 TVE                              Посл.изменение: 10.02.2018

function MakeCookie($Name,$Value,$Duration=0x6FFFFFFF)
{
    setcookie($Name,$Value,$Duration);
    //echo &quot;&lt;br&gt;&quot;.&quot;MakeCookie_1: &quot;.$Name.&quot;=&quot;.$Value.&quot; [&quot;.$Duration.&quot;]&lt;br&gt;&quot;;
    if (IsSet($_COOKIE[$Name])) 
    {
        $_COOKIE[$Name]=$Value;
        //echo &quot;&lt;br&gt;&quot;.&quot;MakeCookie_2: &quot;.$Name.&quot;=&quot;.$_COOKIE[$Name].&quot; [&quot;.$Duration.&quot;]&lt;br&gt;&quot;;
    }
}

// ********************************************************* MakeCookie.php ***</code></pre>
<p>Вызов из сценария:</p>
<pre><code>&lt;?php 
// PHP7/HTML5, EDGE/CHROME                                   *** Inimem.php ***

// Инициализируем переменные-кукисы
$c_BrowEntry=prown\MakeCookie(&#39;BrowEntry&#39;,1,tInt); // Число запросов сайта из браузера</code></pre>
<h6 id="к-содержанию-1"><a href="#%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5">к содержанию</a></h6>
<hr />
<p><strong>Undefined variable: Result</strong></p>
<pre><code>File: C:\TPhpPrown\MakeCookie.php  
Line: 63  
E_NOTICE [HND]  
#0 C:\DoorTry\www\Main.php(26): require_once(&#39;C:\\DoorTry\\www\\...&#39;)
#1 C:\DoorTry\www\index.php(22): require_once(&#39;C:\\DoorTry\\www\\...&#39;)
#2 {main}</code></pre>
<p>В сценарии:</p>
<pre><code>function MakeCookie($Name,$Value,$Type=tStr,$Init=false,$Duration=0x6FFFFFFF)
{
   function _MakeCookie($Name,$Value,$Type,$Duration)
   {
      $Result=MakeType($Value,$Type);
      setcookie($Name,$Value,$Duration);
      if (IsSet($_COOKIE[$Name])) $_COOKIE[$Name]=$Value;
      return $Result;
   }
   // Устанавливаем значение, если инициализация
   if ($Init=true) 
   {
      if (!(IsSet($_COOKIE[$Name]))) 
      {
         $Result=_MakeCookie($Name,$Value,$Type,$Duration);
      }
   }
   // Устанавливаем значение в обычном режиме
   else $Result=_MakeCookie($Name,$Value,$Type,$Duration); 
   return $Result;
}</code></pre>
<hr />
<p><strong>Cannot redeclare prown_MakeCookie() (previously declared</strong></p>
<pre><code>File: C:\TPhpPrown\MakeCookie.php  
Line: 56  
  
E_ERROR [SHT]</code></pre>
<p>В коде:</p>
<pre><code>function MakeCookie($Name,$Value,$Type=tStr,$Init=false,$Duration=0x6FFFFFFF)
{
   56) function _MakeCookie($Name,$Value,$Type,$Duration)
   {
      $Result=MakeType($Value,$Type);
      setcookie($Name,$Value,$Duration);
      if (IsSet($_COOKIE[$Name])) $_COOKIE[$Name]=$Value;
      return $Result;
   }
   // Устанавливаем значение, если инициализация
   if ($Init=true) 
   {
      if (!(IsSet($_COOKIE[$Name]))) 
      {
         $Result=_MakeCookie($Name,$Value,$Type,$Duration);
      }
      else $Result=$_COOKIE[$Name];
   }
   // Устанавливаем значение в обычном режиме
   else $Result=_MakeCookie($Name,$Value,$Type,$Duration); 
   return $Result;
}</code></pre>
<h6 id="к-содержанию-2"><a href="#%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5">к содержанию</a></h6>
<hr />
<p><strong>Undefined index: BrowEntry</strong></p>
<pre><code>File: C:\DoorTry\www\Inimem.php  
Line: 35  
  
E_NOTICE [HND]  
#0 C:\DoorTry\www\index.php(22): require_once(&#39;C:\\DoorTry\\www\\...&#39;)
#1 {main}</code></pre>
<p>В коде</p>
<pre><code>34 // Инициализируем переменные-кукисы
35 echo &#39;in1 $_COOKIE[&quot;BrowEntry&quot;]=&#39;.$_COOKIE[&quot;BrowEntry&quot;].&#39;&lt;br&gt;&#39;;
36 $c_BrowEntry=prown\MakeCookie(&#39;BrowEntry&#39;,3,tInt,true);          // число запросов сайта из браузера</code></pre>
<p>Что было: <strong><em>Запрещены кукисы, а в коде идет обращение к элементу массива кукисов</em></strong> ###### <a href="#%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5">к содержанию</a></p>
<hr />
<p>**Uncaught ArgumentCountError: Too few arguments to function PageStarter::__construct(), 1 passed in C:.php on line 46 and exactly 2 expected**</p>
<pre><code>File: C:\TPhpTools\TPageStarter\PageStarterClass.php
Line: 34

E_ERROR [SHT]
Stack trace:
#0 C:\DoorTry\www\Main.php(46): PageStarter-&gt;__construct(&#39;doortry.ru&#39;)
#1 C:\DoorTry\www\index.php(22): require_once(&#39;C:\\DoorTry\\www\\...&#39;)
#2 {main}</code></pre>
<p>В коде</p>
<pre><code>&quot;PageStarterClass.php&quot;
34 public function __construct($iSiteName,$iPageName)
35 {
36    $SiteName=$iSiteName;
37    $PageName=$iPageName;
38 }

&quot;Main.php&quot;
45 require_once $SiteHost.&quot;/TPhpTools/TPageStarter/PageStarterClass.php&quot;;
46 $oPageStarter = new PageStarter();
47 require_once $SiteRoot.&quot;/IniMem.php&quot;; </code></pre>
<p>Что было: <strong><em>В функции-конструкторе класса объявлены два входных параметра, а при вызове - один</em></strong> ###### <a href="#%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5">к содержанию</a></p>
<hr />
<p><strong>simplexml_load_file(http://www.stolica.onego.ru/rss.php/feed.xml): failed to open stream: -“-”-</strong></p>
<pre><code>File: C:\DoorTry\www\Pages\News\SimpleTape.php
Line: 23

E_WARNING [HND]
#0 C:\DoorTry\www\Pages\News\MakeNews.php(125): SimpleTape(&#39;http://www.stol...&#39;, &#39;8&#39;)
#1 C:\DoorTry\www\Site.php(46): NewsView(true, &#39;1&#39;, &#39;8&#39;, &#39;stolica-na-oneg...&#39;)
#2 C:\DoorTry\www\Main.php(92): require_once(&#39;C:\\DoorTry\\www\\...&#39;)
#3 C:\DoorTry\www\index.php(22): require_once(&#39;C:\\DoorTry\\www\\...&#39;)
#4 {main}</code></pre>
<p>В коде</p>
<pre><code>&quot;SimpleTape.php&quot;
22 $url=&quot;http://www.stolica.onego.ru/rss.php/feed.xml&quot;;
23 $rss = simplexml_load_file($url);</code></pre>
<p>Что было: <strong><em>Ошибка или истекло время ожидания при открытии новостной ленты</em></strong></p>
<pre><code>// ****************************************************************************
// *                       Определить работаем ли на сайте                    *
// ****************************************************************************
function isDoortry();  здесь 48 строка
{
   $Result=false;
   if ($_SERVER[&#39;HTTP_HOST&#39;]==&#39;doortry.ru&#39;) $Result=true;
   return $Result;
}</code></pre>
<p>​<br />
​ [PHP] syntax error, unexpected ‘;’, expecting ‘{’ ​<br />
File: C:.php Line: 48</p>
<pre><code>E_PARSE [SHT]</code></pre>
<p>долго не мог понять ошибку - видел точку с запятой и не понимал что это ошибка - глаза были запривычены</p>
<p>еще ошибка</p>
<p>[PHP] Methods with the same name as their class will not be constructors in a future version of PHP; TestSuite has a deprecated constructor</p>
<p>File: C:_case.php Line: 476</p>
<p>E_DEPRECATED [HND] #0 C:.php(12): require_once(‘C:\TSimpleTest\…’) #1 C:.php(96): require_once(‘C:\TSimpleTest\…’) #2 C:.php(97): MakeTest(‘C:\TPhpPrown\ww…’, Array) #3 C:.php(24): require_once(‘C:\TPhpPrown\ww…’) #4 {main}</p>
<h6 id="к-содержанию-3"><a href="#%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5">к содержанию</a></h6>
</body>
</html>
